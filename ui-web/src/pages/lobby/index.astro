---
import Layout from "../../layouts/Layout.astro";
import LobbyComponent from "../../components/Lobby";
---

<Layout title="MazeChase - Lobby">
    <LobbyComponent client:load/>
</Layout>

<script>
    import { getUserInfo } from '../../lib/auth';
    
    // Check if user is logged in, redirect to login if not
    async function checkAuth() {
        try {
            const username = await getUserInfo();
            if (!username) {
                window.location.href = '/auth/login';
            }
        } catch (e) {
            console.log('Not logged in, redirecting...');
            window.location.href = '/auth/login';
        }
    }
    
    checkAuth();
</script>
